"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[30299],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>d});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),p=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(r),d=n,f=u["".concat(l,".").concat(d)]||u[d]||m[d]||o;return r?a.createElement(f,i(i({ref:t},c),{},{components:r})):a.createElement(f,i({ref:t},c))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var p=2;p<o;p++)i[p]=r[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}u.displayName="MDXCreateElement"},89604:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>s,metadata:()=>p,toc:()=>m});var a=r(83117),n=r(80102),o=(r(67294),r(3905)),i=["components"],s={},l="Macros",p={unversionedId:"User Guide/Dashboards/Favorites/Macros",id:"User Guide/Dashboards/Favorites/Macros",title:"Macros",description:"The [Dashboards->Favorites->Macros] menu can be used to configure custom NQL language macros in the form of various variables.",source:"@site/docs/04-User Guide/01-Dashboards/01-Favorites/04-Macros.md",sourceDirName:"04-User Guide/01-Dashboards/01-Favorites",slug:"/User Guide/Dashboards/Favorites/Macros",permalink:"/User Guide/Dashboards/Favorites/Macros",draft:!1,tags:[],version:"current",lastUpdatedAt:1686667651,formattedLastUpdatedAt:"13 Jun 2023",sidebarPosition:4,frontMatter:{},sidebar:"docs",previous:{title:"Filters",permalink:"/User Guide/Dashboards/Favorites/Filters"},next:{title:"Bookmarks",permalink:"/User Guide/Dashboards/Favorites/Bookmarks"}},c={},m=[{value:"Example1:",id:"example1",level:2},{value:"Example 2:",id:"example-2",level:2},{value:"Example 3:",id:"example-3",level:2},{value:"Macro definition in the Sycope",id:"macro-definition-in-the-sycope",level:2}],u={toc:m};function d(e){var t=e.components,s=(0,n.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"macros"},"Macros"),(0,o.kt)("p",null,"The ","[",(0,o.kt)("strong",{parentName:"p"},"Dashboards->Favorites->Macros"),"]"," menu can be used to configure custom NQL language macros in the form of various variables."),(0,o.kt)("p",null,"A Macro is used to substitute a string of characters into an NQL expression using a variable."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Note that it does not add any additional set of logic, but only inserts the stored part of the expression in place of the variable. You have to make sure that the NQL syntax after inserting the macro is correct by maintaining proper spacing, punctuation marks and control expressions.")),(0,o.kt)("p",null,"Syntax:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"$MACRO_NAME$")),(0,o.kt)("p",null,"In order to use a macro, remember to precede and end its name with a ",(0,o.kt)("inlineCode",{parentName:"p"},"$")," sign."),(0,o.kt)("h2",{id:"example1"},"Example1:"),(0,o.kt)("p",null,"Having an NQL with a macro called MACRO1 to which the value ",(0,o.kt)("strong",{parentName:"p"},"MACRO1=sometext")," is assigned,"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'src stream="alerts" | set fullName=concat("alertName", "$MACRO1$", "alertSeverity") | limit 1000')),(0,o.kt)("p",null,'during its execution, the character string "MACRO1" will be substituted with the MACRO1 value, so the produced NQL will read as follows:'),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'src stream="alerts" | set fullName=concat("alertName", "sometext", "alertSeverity") | limit 1000')),(0,o.kt)("h2",{id:"example-2"},"Example 2:"),(0,o.kt)("p",null,"Macro: MACRO2 = ",(0,o.kt)("strong",{parentName:"p"},'src stream="alerts"')),(0,o.kt)("p",null,"NQL: ",(0,o.kt)("inlineCode",{parentName:"p"},"$MACRO2$ | where serverBytes>100 | sort serverBytes | limit 1000")),(0,o.kt)("p",null,"Result: ",(0,o.kt)("inlineCode",{parentName:"p"},'src stream="alerts" | where serverBytes>100 | sort serverBytes | limit 1000')),(0,o.kt)("h2",{id:"example-3"},"Example 3:"),(0,o.kt)("p",null,"Macro: "),(0,o.kt)("p",null,"MACRO31 = ",(0,o.kt)("strong",{parentName:"p"},"aggr clientIpCount = count(clientIpCount)")),(0,o.kt)("p",null,"MACRO32 = ",(0,o.kt)("strong",{parentName:"p"},"aggr maxTimeStamp = max(timestamp)")),(0,o.kt)("p",null,"NQL: ",(0,o.kt)("inlineCode",{parentName:"p"},'src stream="netflow" | fork ($MACRO31$), ($MACRO32$)')),(0,o.kt)("p",null,"Result: ",(0,o.kt)("inlineCode",{parentName:"p"},'src stream="netflow" | fork (aggr clientIpCount = count(clientIpCount)), (aggr maxTimeStamp = max(timestamp))')),(0,o.kt)("h2",{id:"macro-definition-in-the-sycope"},"Macro definition in the Sycope"),(0,o.kt)("p",null,'In order to define a new macro or edit an existing one, you must select the "Macros" tab in the ',"[",(0,o.kt)("strong",{parentName:"p"},"Dashboards->Favorities"),"]","."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"menu master",src:r(89437).Z,width:"1605",height:"774"})),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"New Macro")," button is used for adding a new macro."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"menu master",src:r(24998).Z,width:"646",height:"555"})),(0,o.kt)("p",null,"Parameters:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Name")," - Name of the macro"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Description")," - Description of the macro"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Query")," - Text of the macro"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Tags")," - Tags assigned to the macro object.")),(0,o.kt)("p",null,"You can use a macro added in this manner, for example, in the ",(0,o.kt)("strong",{parentName:"p"},"Playground"),", in the Query field: ",(0,o.kt)("inlineCode",{parentName:"p"},"$MACRO2$ | sort id | limit 1000")))}d.isMDXComponent=!0},24998:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/nql-macro-edit-3b8a034843353a8fc2d5b50583b968bd.png"},89437:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/nql-macro-main-4cbc653993944157b9603c87c728e224.png"}}]);